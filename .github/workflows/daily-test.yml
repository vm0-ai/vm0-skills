name: Daily Skills Test

on:
  schedule:
    - cron: '0 17 * * *'
  workflow_dispatch:
    inputs:
      prompt:
        description: 'Prompt to send to the agent'
        required: false
        default: 'do the job'

jobs:
  run-skills-tester:
    runs-on: ubuntu-latest
    steps:
      - name: Run Skills Tester Agent
        id: vm0
        uses: vm0-ai/run-action@v1
        with:
          agent: skills-tester
          prompt: ${{ inputs.prompt || 'do the job' }}
          silent: true
          vm0-token: ${{ secrets.VM0_TOKEN }}
          secrets: |
            CLAUDE_CODE_OAUTH_TOKEN=${{ secrets.CLAUDE_CODE_OAUTH_TOKEN }}
            GITHUB_TOKEN=${{ secrets.GH_TOKEN }}
            SLACK_BOT_TOKEN=${{ secrets.SLACK_BOT_TOKEN }}
            DISCORD_BOT_TOKEN=${{ secrets.DISCORD_BOT_TOKEN }}
            TAVILY_API_KEY=${{ secrets.TAVILY_API_KEY }}
            FIRECRAWL_API_KEY=${{ secrets.FIRECRAWL_API_KEY }}
            ELEVENLABS_API_KEY=${{ secrets.ELEVENLABS_API_KEY }}
            DEEPSEEK_API_KEY=${{ secrets.DEEPSEEK_API_KEY }}
            PDFORGE_API_KEY=${{ secrets.PDFORGE_API_KEY }}
            HCTI_USER_ID=${{ secrets.HCTI_USER_ID }}
            HCTI_API_KEY=${{ secrets.HCTI_API_KEY }}
            SERPAPI_API_KEY=${{ secrets.SERPAPI_API_KEY }}
            PERPLEXITY_API_KEY=${{ secrets.PERPLEXITY_API_KEY }}
            BRAVE_API_KEY=${{ secrets.BRAVE_API_KEY }}
            MONDAY_API_KEY=${{ secrets.MONDAY_API_KEY }}
            SUPADATA_API_KEY=${{ secrets.SUPADATA_API_KEY }}
            PDFCO_API_KEY=${{ secrets.PDFCO_API_KEY }}
            SHORTIO_API_KEY=${{ secrets.SHORTIO_API_KEY }}
            RUNWAY_API_KEY=${{ secrets.RUNWAY_API_KEY }}
            INSTANTLY_API_KEY=${{ secrets.INSTANTLY_API_KEY }}
            APIFY_API_TOKEN=${{ secrets.APIFY_API_TOKEN }}
            ZAPSIGN_API_TOKEN=${{ secrets.ZAPSIGN_API_TOKEN }}
            QDRANT_API_KEY=${{ secrets.QDRANT_API_KEY }}
            MINIMAX_API_KEY=${{ secrets.MINIMAX_API_KEY }}
            BROWSERLESS_API_TOKEN=${{ secrets.BROWSERLESS_API_TOKEN }}
            ZEPTOMAIL_API_KEY=${{ secrets.ZEPTOMAIL_API_KEY }}
            CHATWOOT_API_TOKEN=${{ secrets.CHATWOOT_API_TOKEN }}
            SCRAPENINJA_API_KEY=${{ secrets.SCRAPENINJA_API_KEY }}
            BRIGHTDATA_API_KEY=${{ secrets.BRIGHTDATA_API_KEY }}
            CRONLYTIC_API_KEY=${{ secrets.CRONLYTIC_API_KEY }}
            PDF4ME_API_KEY=${{ secrets.PDF4ME_API_KEY }}
            PUSHINATOR_API_KEY=${{ secrets.PUSHINATOR_API_KEY }}
            TWENTY_API_KEY=${{ secrets.TWENTY_API_KEY }}
            KOMMO_API_KEY=${{ secrets.KOMMO_API_KEY }}
            FAL_KEY=${{ secrets.FAL_KEY }}
            DEVTO_API_KEY=${{ secrets.DEVTO_API_KEY }}
            OPENAI_API_KEY=${{ secrets.OPENAI_API_KEY }}
            LINEAR_API_KEY=${{ secrets.LINEAR_API_KEY }}
            GOOGLE_ACCESS_TOKEN=${{ secrets.GOOGLE_ACCESS_TOKEN }}
            YOUTUBE_API_KEY=${{ secrets.YOUTUBE_API_KEY }}
            JIRA_API_TOKEN=${{ secrets.JIRA_API_TOKEN }}
            GITLAB_TOKEN=${{ secrets.GITLAB_TOKEN }}
            SENTRY_TOKEN=${{ secrets.SENTRY_TOKEN }}
            AXIOM_API_TOKEN=${{ secrets.AXIOM_API_TOKEN }}
            NOTION_API_KEY=${{ secrets.NOTION_API_KEY }}
            PLAUSIBLE_API_KEY=${{ secrets.PLAUSIBLE_API_KEY }}
            SLACK_WEBHOOK_URL=${{ secrets.SLACK_WEBHOOK_URL }}
            CLOUDINARY_API_KEY=${{ secrets.CLOUDINARY_API_KEY }}
            CLOUDINARY_API_SECRET=${{ secrets.CLOUDINARY_API_SECRET }}
            FIGMA_API_TOKEN=${{ secrets.FIGMA_API_TOKEN }}
            SUPABASE_SECRET_KEY=${{ secrets.SUPABASE_SECRET_KEY }}
          vars: |
            SHORTIO_DOMAIN=${{ vars.SHORTIO_DOMAIN }}
            QDRANT_URL=${{ vars.QDRANT_URL }}
            CHATWOOT_BASE_URL=${{ vars.CHATWOOT_BASE_URL }}
            CHATWOOT_ACCOUNT_ID=${{ vars.CHATWOOT_ACCOUNT_ID }}
            CRONLYTIC_USER_ID=${{ vars.CRONLYTIC_USER_ID }}
            TWENTY_API_URL=${{ vars.TWENTY_API_URL }}
            KOMMO_SUBDOMAIN=${{ vars.KOMMO_SUBDOMAIN }}
            JIRA_DOMAIN=${{ vars.JIRA_DOMAIN }}
            JIRA_EMAIL=${{ vars.JIRA_EMAIL }}
            GITLAB_HOST=${{ vars.GITLAB_HOST }}
            SENTRY_HOST=${{ vars.SENTRY_HOST }}
            SENTRY_ORG=${{ vars.SENTRY_ORG }}
            PLAUSIBLE_SITE_ID=${{ vars.PLAUSIBLE_SITE_ID }}
            CLOUDINARY_CLOUD_NAME=${{ vars.CLOUDINARY_CLOUD_NAME }}
            SUPABASE_URL=${{ vars.SUPABASE_URL }}
            SUPABASE_PUBLISHABLE_KEY=${{ vars.SUPABASE_PUBLISHABLE_KEY }}
